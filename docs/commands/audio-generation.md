# 오디오 생성 파이프라인 후속 명령

## 📌 배경
- `outputs/audio/청자 상감운학문 매병.mp3`가 112바이트 더미 파일로 커밋되어 실제 플레이가 되지 않습니다.
- dry_run 모드에서 사용하는 `_create_dummy_audio`(src/pipelines/audio_gen.py:150)의 출력이 그대로 레퍼런스 산출물로 남은 상태입니다.
- 파이프라인 신뢰성을 위해 실제 TTS 출력 또는 샘플 산출물 제외 전략이 필요합니다.

## ✅ 수행할 작업
1. dry_run이 아닌 정상 모드로 `run()`을 실행해 참조용 MP3를 재생성하거나, 샘플 산출물 전체를 리포지토리에서 제거하고 산출물 디렉토리를 `.gitignore`로 관리하세요.
2. `_create_dummy_audio`가 생성한 더미 파일이 프로덕션 실행에서 혼입되지 않도록, dry_run 실행 시 출력 파일명에 `-dry-run` 접미사를 붙이거나 별도 디렉토리에 저장하는 방안을 적용하세요.
3. TTS 호출이 성공했는지 검증하기 위해 `audio_data` 길이가 최소 임계치(예: 1KB 이상)인지 확인하는 가드 로직을 추가하고, 실패 시 예외를 발생시켜 빈 파일이 저장되지 않도록 하세요.
4. 수정 후 `python src/pipelines/audio_gen.py --keyword "청자 상감운학문 매병"`을 실제 API 키로 테스트하여 플레이 가능한 MP3를 확보하고, dev-log에 결과를 기록하세요.

## 🧪 검증 체크리스트
- `outputs/audio/` 디렉토리에 더미(112바이트) 파일이 남지 않는지 확인.
- dry_run과 실제 실행 결과가 서로 다른 경로/파일명으로 관리되는지 확인.
- 예외 처리로 인해 실패 케이스에서 빈 MP3가 저장되지 않는지 확인.
- 통합 파이프라인(`src/main.py`)을 통해 실행했을 때도 동일한 검증이 통과하는지 확인.
