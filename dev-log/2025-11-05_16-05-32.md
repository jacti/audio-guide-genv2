# Review Log - 2025-11-05 16:05:32

- 대상 커밋: c992fff9ad9e2d29aa6e0aa397bd37fb7921db9a (스크립트 작성 파이프라인)
- 변경 요약: `src/utils/path_sanitizer.py` 헬퍼를 사용하도록 스크립트 파이프라인의 입출력 경로 생성 로직을 교체하고, 공백을 유지하는 새 파일명이 생성되도록 수정.

## 🔍 주요 관찰
- 정보 파이프라인(`src/pipelines/info_retrieval.py`)이 생성하는 Markdown 파일 경로와는 일치하지만, 오디오 파이프라인(`src/pipelines/audio_gen.py`)은 여전히 언더스코어 기반 슬러그(`_normalize_filename`)에 의존한다.
- 새 dry-run 산출물(`outputs/script/청자 상감운학문 매병_script.md`)이 저장되며, 기존 언더스코어 파일(`outputs/script/청자_상감운학문_매병_script.md`)은 그대로 남아 있어 혼선이 예상된다.

## ❗ 발견 이슈
1. `src/pipelines/script_gen.py:122-124`에서 파일 경로를 공백 유지 규칙으로 생성함에 따라, 오디오 파이프라인이 기대하는 `outputs/script/청자_상감운학문_매병_script.md`가 더 이상 생성되지 않는다.
   - 재현: 스크립트 파이프라인을 최신 코드로 실행 후, 오디오 파이프라인을 동일 키워드로 실행하면 `FileNotFoundError` 발생 (`src/pipelines/audio_gen.py:233-241`).
   - 영향: 전체 파이프라인 실행이 2→3 단계에서 중단.
   - 제안: 스크립트 파이프라인에서 한시적으로 legacy 파일명도 함께 저장하거나, 오디오 파이프라인을 즉시 `path_sanitizer` 기반으로 업데이트하도록 조율.

## 📣 파이프라인별 피드백 요약
- **스크립트 작성**: 새 규칙 적용은 타당하나, 오디오 파이프라인 업데이트 전까지 언더스코어 파일을 병행 생성하거나 변경 공지를 통해 통합 일정 조율 필요.
- **오디오 생성**: `src/utils/path_sanitizer.py`의 `script_markdown_path`와 `audio_output_path`를 사용하도록 긴급 리팩터링 필수.
- **정보 검색**: 규칙은 일치하나 `_sanitize_filename`을 공통 헬퍼로 교체하는 후속 작업 권장.

## ✅ 후속 명령
- `docs/commands/script-generation.md`에 스크립트 파이프라인 담당 에이전트용 추가 지시 작성 완료.
- 오디오 파이프라인 담당자에게는 본 리뷰 내용을 공유하고 기존 `pipeline-integration` 명령을 참조하도록 안내 예정.
