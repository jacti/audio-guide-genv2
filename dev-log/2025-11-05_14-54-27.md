# Review Log - 2025-11-05 14:54:27

- 대상 커밋: 05ac6c4452b6776f7a756759a0918c192b39e238 (main)
- 변경 개요: 파이프라인 경로 규칙 통합 지침 문서화 및 `src/utils/path_sanitizer.py` 신규 추가.
- 핵심 관찰:
  - 새 유틸은 정보 파이프라인의 기존 `_sanitize_filename`과 동일 규칙(특수문자 제거 + 공백 유지)을 제공하지만, 실제 파이프라인 코드가 아직 해당 헬퍼를 사용하지 않아 경로 불일치가 지속됨.
  - 스크립트/오디오 파이프라인은 여전히 공백을 언더스코어로 치환한 파일명을 기대해 정보 단계 산출물을 읽지 못한다.
- 발견 이슈:
  1. `src/pipelines/script_gen.py:121` — 정보 파일 경로를 `keyword.replace(" ", "_")`로 구성해 `_info` 단계 산출물과 불일치. 실제 실행 시 `FileNotFoundError` 발생.
  2. `src/pipelines/audio_gen.py:233` — 스크립트 파일 경로를 `_normalize_filename`으로 생성해 공백이 `_`로 치환됨. 스크립트 단계가 새 규칙을 따를 경우 다시 불일치가 생길 위험.
  3. `src/pipelines/info_retrieval.py:164` — 새로 추가된 `path_sanitizer`와 동일 로직을 별도 함수로 유지해 규칙 변경 시 동기화 리스크 존재.
- 후속 조치 요청:
  - 세 파이프라인 모두 `src/utils/path_sanitizer.py`에 정의된 헬퍼를 사용해 파일명을 계산하도록 리팩터링.
  - 리팩터링 후 dry-run과 실제 실행 경로를 각각 점검하고, `docs/plan.md`에 최종 규칙을 명문화.
- 파이프라인별 전달 사항:
  - 정보 검색: `_sanitize_filename` 제거 후 `info_markdown_path` 사용, 로깅/문서 업데이트.
  - 스크립트 생성: `info_markdown_path`와 `script_markdown_path`로 경로 계산, 기존 언더스코어 슬러그 제거.
  - 오디오 생성: `_normalize_filename` 제거, `script_markdown_path` 및 `audio_output_path` 사용, CLI 예시/로그 갱신.
